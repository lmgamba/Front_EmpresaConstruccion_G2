<div class="assignments-container">
  <div class="page-header">
    <h2>ğŸ“… Mis Asignaciones</h2>
    <p class="text-secondary">Obras en las que estÃ¡s asignado actualmente.</p>
  </div>

  <div class="assignments-grid">
    @for (item of assignments; track item.id_assignments) {
      <div class="card dark-card assignment-card" [class.finished]="item.status === 0">
        <div class="card-top">
          <span class="site-id-badge">ğŸ—ï¸ Obra ID: {{ item.constructionsSites_id }}</span>

          @if (item.status === 1) {
            <span class="status-badge active">ğŸŸ¢ En Curso</span>
          } @else {
            <span class="status-badge finished">ğŸ”´ Finalizado</span>
          }
        </div>

        <div class="card-body">
          <h3 class="construction-title">
            Proyecto de ConstrucciÃ³n #{{ item.constructionsSites_id }}
          </h3>

          <div class="timeline-box">
            <div class="date-group">
              <span class="label">Fecha Inicio</span>
              <span class="date-value">{{ item.date_start | date: 'dd MMM yyyy' }}</span>
            </div>

            <div class="timeline-line"></div>

            <div class="date-group right">
              <span class="label">Fecha Fin</span>
              <span class="date-value">
                {{ item.date_finish ? (item.date_finish | date: 'dd MMM yyyy') : 'ğŸš§ Pendiente' }}
              </span>
            </div>
          </div>
        </div>

        <div class="card-footer">
          @if (item.status === 1) {
            <button class="btn-primary full-width">ğŸ“ Registrar Parte Diario</button>
          } @else {
            <button class="btn-outline full-width">ğŸ‘ï¸ Ver Historial</button>
          }
        </div>
      </div>
    } @empty {
      <div class="empty-state">
        <p>ğŸ“­ No tienes ninguna asignaciÃ³n registrada.</p>
      </div>
    }
  </div>
</div>
